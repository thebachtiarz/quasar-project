import { Cookies } from 'quasar'
import ElecStore from 'electron-store'
const Store = new ElecStore()
const defaultStorage = 'cookie' // ! 'cookie' / 'storage' / 'store'
// @ cookie management
const cookieSetCreds = (data) => Cookies.set('_jwtApiToken', data)
const cookieGetCreds = () => Cookies.get('_jwtApiToken')
const cookieRemoveCreds = () => Cookies.remove('_jwtApiToken')
// @ local-storage management
const storageSetCreds = (data) => localStorage.setItem('_jwtApiToken', data)
const storageGetCreds = () => localStorage.getItem('_jwtApiToken')
const storageRemoveCreds = () => localStorage.removeItem('_jwtApiToken')
// @ store electron
const storeSetCreds = (data) => Store.set('_jwtApiToken', data)
const storeGetCreds = () => Store.get('_jwtApiToken')
const storeRemoveCreds = () => Store.remove('_jwtApiToken')
// @ creds management core
const setCreds = (data) => {
  if (defaultStorage === 'cookie') cookieSetCreds(data)
  else if (defaultStorage === 'storage') storageSetCreds(data)
  else if (defaultStorage === 'store') storeSetCreds(data)
}
const getCreds = () => {
  if (defaultStorage === 'cookie') return cookieGetCreds()
  else if (defaultStorage === 'storage') return storageGetCreds()
  else if (defaultStorage === 'store') return storeGetCreds()
}
const removeCreds = () => {
  if (defaultStorage === 'cookie') return cookieRemoveCreds()
  else if (defaultStorage === 'storage') return storageRemoveCreds()
  else if (defaultStorage === 'store') return storeRemoveCreds()
}
// @ real creds engine
const credMng = {
  credentialKeySave: (data, rmb = '') => setCreds(data),
  credentialKeyTake: () => getCreds(),
  credentialKeyRemove: () => removeCreds(),
  axiosHeaderToken: () => { return { headers: { Authorization: `Bearer ${getCreds()}` } } }
}
export default credMng
